Humphrey.DOM.newMedia=document.getElementById("add-media"),Humphrey.DOM.addMediaButton=document.getElementById("add-media-button"),Humphrey.DOM.library=document.getElementById("media-library"),function(a){Humphrey.loadMedia=function(b,c){var d=new Date;b||(b=d.getFullYear().toString()),c||(c=(d.getMonth()+1).toString()),0>c-10&&(c="0"+c),Humphrey.S3.listObjects({Bucket:Humphrey.BUCKET,Prefix:"media/"+b+"/"+c},function(d,e){d&&console.log(d),e?(e.Contents||(e.Contents=[]),e.Contents.forEach(function(b){if(b.Size>0){var c=new Image;c.src=Humphrey.URL+"/"+b.Key,a.library.appendChild(c)}}),"12"===c?Humphrey.getObject({Key:"media/"+(b-1)},function(a,b){a&&console.log(a)}):Humphrey.loadMedia({})):Humphrey.loadMedia({})})},Humphrey.checkIfFileExists=function(a,b){Humphrey.S3.getObject({Key:"media/"+a.name},function(c,d){d&&alert("File already exists. Are you sure you want to overwrite it?"),b(a)})},Humphrey.addMedia=function(a){a.type&&Humphrey.checkIfFileExists(a,Humphrey.uploadMedia)},Humphrey.uploadMedia=function(a){var b=new Date,c=b.getFullYear(),d=b.getMonth()+1;0>d-10&&(d="0"+d.toString()),Humphrey.S3.putObject({Key:"media/"+c+"/"+d+"/"+a.name,ContentType:a.type,Body:a,ACL:"public-read"},noop)}}(Humphrey.DOM);