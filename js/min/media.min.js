Humphrey.checkIfFileExists=function(a,b){Humphrey.S3.getObject({Key:"media/"+a.name},function(c,d){var e=a;if(d){console.log("file exists");var f=a.name.split("."),g=f[f.length-1];if(f=f[0],console.log("before updating...",f),f.slice(f.lastIndexOf("-")+1).match(/^[0-9]*$/)){var h=parseInt(f.slice(f.lastIndexOf("-")),10);f=f.slice(0,f.lastIndexOf("-")+1)+(h+1).toString(),e.name=f+"."+g}else e.name=f+"-1."+g,console.log("adding it again but for the first time:",a,e)}b(e)})},Humphrey.addMedia=function(a){a.type&&Humphrey.checkIfFileExists(a,Humphrey.uploadMedia)},Humphrey.uploadMedia=function(a){Humphrey.S3.putObject({Key:"media/"+a.name,ContentType:a.type,Body:a,ACL:"public-read"},noop)};